{"version":3,"sources":["views/Trade/AutoOrderStopList.jsx","views/Trade/index.jsx","App.js","serviceWorker.js","index.js"],"names":["SYMBOLS","ORDER_METHODS","SIDE_COLOR_CLASS","Buy","Sell","SIGNAL_OP_COLOR_CLASS","long","short","SIGNALS","rsiOverTrade5m","operators","rsiDivergence5m","rsiOverTrade_3070_1h","rsiOverTrade_2575_1h","rsiOverTrade1h","rsiDivergence_3070_1h","rsiDivergence_2575_1h","rsiDivergence1h","break1h","values","key","defaultValue","break5m","signalKeys","Object","keys","AutoOrderStopList","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","symbol","side","amount","order_method","signal_name","signal_operator","signal_value","remain_times","loading","list","fetchList","_this2","_this$state","react_default","a","createElement","style","marginBottom","value","onChange","handleChangeForm","bind","map","s","type","width","m","j","o","_ref","val","undefined","disabled","onClick","onAdd","renderList","_this3","fontSize","i","amountColor","on","className","cursor","color","handleChangeAmount","handleChangeKeyValue","getOwnPropertyNames","id","concat","handleChangeOperatorValue","for","handleChangeRemainTimes","handleChangeMinInterval","min_interval","handleDeleteItem","e","_this4","setState","defineProperty","target","updateStateBySignalName","_this$state2","indexOf","_this5","user","_this$state3","auto_order","forEach","_ref2","axios","post","then","_ref3","status","data","onPushLog","catch","_this6","get","_ref4","index","_this7","window","confirm","_ref5","autoOrder","newOrder","objectSpread","updateAutoOrder","repeat","_this8","_ref6","newAmount","prompt","newTimes","newV","newInterval","React","Component","positionKeyText","leverage","currentQty","avgCostPrice","realisedGrossPnl","realisedPnl","unrealisedPnl","unrealisedPnlPcnt","AUTO_STOP_OFFSET_MAP","XBTUSD","ETHUSD","ADAH19","XRPH19","ETHH19","EOSH19","LTCH19","TRXH19","BCHH19","supportSymbols","Trade","logs","users","list_pending","all_quotes","all_instruments","fetchUserList","fetchOrderbookDepth","fetchAllInstruments","xbtInstrument","findInstrumentBySymbol","xbtBidPrice","bidPrice","options","positions","margin","orders","form","pending","walletBalance","availableMargin","totalRPnl","reduce","pre","cur","orderStopValideMsg","checkStop","positionKeys","balance","balaceUsd","toFixed","rpnBalanceUsd","position","handleClosePosition","format","formatPosition","cn","handlePositionCellClick","filter","ordType","order","isBuy","handleDelOrder","title","handleUpdateOrder","orderQty","price","execInst","ordStatus","leavesQty","Date","timestamp","toLocaleString","quote","instrument","whiteSpace","bidSize","askPrice","askSize","fundingRate","fundingTimestamp","order_symbol","handleSelectChangeFormData","order_side","handleInputChangeFormData","order_qty","checked","auto_price","handleChangeCheckbox","order_price","handleOrderLimit","reduce_only","marginLeft","handleOrderMarket","handleOrderScalping","autoUpdateStopOpenMarketOrder","handleChangeZZSD","autoUpdateStopOpenMarketOrder1h","handleChangeZZSD1h","stopPx","stop_symbol","stop_side","stop_qty","handleOrderStopByPreK","stop_price","handleOrderStop","stop_close","AutoOrderStopList_AutoOrderStopList","pushLog","handleDeleteAll","handleCheckboxOption","log","JSON","stringify","result","info","length","item","items","alert","push","userData","_userData$form","path","qty","isCaceled","text","_userData$form2","market","_userData$form3","stopOffset","Promise","all","offset","_this9","_userData$form4","_ref7","period","_this10","_userData$form5","_ref8","_this11","order_id","orderID","_ref9","_this12","_ref10","_this13","_ref11","_this14","newLeverage","_ref12","_this15","oldValue","newVal","params","_ref13","msg","p","isbuyPosition","totalQty","Math","abs","fetchChangeUserOption","_this16","_ref14","App","Trade_Trade","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.37608ab9.chunk.js","sourcesContent":["import React from 'react'\r\nimport axios from 'axios'\r\n\r\nconst SYMBOLS = [\r\n  'XBTUSD',\r\n  'ETHUSD',\r\n]\r\n\r\nconst ORDER_METHODS = [\r\n  'stopMarket1h',\r\n  'stopMarket5m',\r\n  'market',\r\n]\r\n\r\nconst SIDE_COLOR_CLASS = {\r\n  'Buy': 'green',\r\n  'Sell': 'red'\r\n}\r\n\r\nconst SIGNAL_OP_COLOR_CLASS = {\r\n  'long': 'green',\r\n  'short': 'red'\r\n}\r\n\r\nconst SIGNALS = {\r\n  // 'autoCloseMacdDivergence5m',\r\n  // 'autoCloseMacdDivergence1h',\r\n  'rsiOverTrade5m': { operators: ['long', 'short'] },\r\n  'rsiDivergence5m': { operators: ['long', 'short'] },\r\n  'rsiOverTrade_3070_1h': { operators: ['long', 'short'] },\r\n  'rsiOverTrade_2575_1h': { operators: ['long', 'short'] },\r\n  'rsiOverTrade1h': { operators: ['long', 'short'] },\r\n  'rsiDivergence_3070_1h': { operators: ['long', 'short'] },\r\n  'rsiDivergence_2575_1h': { operators: ['long', 'short'] },\r\n  'rsiDivergence1h': { operators: ['long', 'short'] },\r\n  // 'stochOverTrade5m': { operators: ['long', 'short'] },\r\n  // 'stochOverTrade1h': { operators: ['long', 'short'] },\r\n  // 'stochDivergence5m': { operators: ['long', 'short'] },\r\n  // 'stochDivergence1h': { operators: ['long', 'short'] },\r\n  'break1h': { operators: ['high1', 'low1'], values: [{ key: 'times', defaultValue: 1 }] },\r\n  'break5m': { operators: ['high1', 'low1'], values: [{ key: 'times', defaultValue: 1 }] },\r\n}\r\n\r\nconst signalKeys = Object.keys(SIGNALS)\r\n\r\nexport default class AutoOrderStopList extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      symbol: 'XBTUSD',\r\n      side: 'Buy',\r\n      amount: 1000,\r\n      order_method: 'stopMarket1h',\r\n      signal_name: 'rsiDivergence_3070_1h',\r\n      signal_operator: 'long',\r\n      signal_value: '',\r\n      remain_times: 1,\r\n      loading: false,\r\n      list: [],\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.fetchList()\r\n  }\r\n  render() {\r\n    const { symbol, side, amount, signal_name, signal_operator, order_method, remain_times, loading } = this.state\r\n    const operators = SIGNALS[signal_name].operators\r\n    const values = SIGNALS[signal_name].values\r\n    return <div>\r\n      <div style={{ marginBottom: '5px' }}>\r\n        <select value={symbol} onChange={this.handleChangeForm.bind(this, 'symbol')}>\r\n          {\r\n            SYMBOLS.map(s => <option value={s}>{s}</option>)\r\n          }\r\n        </select>\r\n        <select value={side} onChange={this.handleChangeForm.bind(this, 'side')}>\r\n          <option value=\"Buy\">Buy</option>\r\n          <option value=\"Sell\">Sell</option>\r\n        </select>\r\n        <input type=\"number\" value={amount} style={{ width: '80px' }} onChange={this.handleChangeForm.bind(this, 'amount')} />\r\n        <select value={order_method} onChange={this.handleChangeForm.bind(this, 'order_method')}>\r\n          {\r\n            ORDER_METHODS.map(m => <option value={m}>{m}</option>)\r\n          }\r\n        </select>\r\n        <select value={signal_name} onChange={this.handleChangeForm.bind(this, 'signal_name')}>\r\n          {\r\n            signalKeys.map((s, j) => <option value={s}>[{j + 1}]{s}</option>)\r\n          }\r\n        </select>\r\n        <select value={signal_operator} onChange={this.handleChangeForm.bind(this, 'signal_operator')}>\r\n          {\r\n            operators.map(o => <option value={o}>{o}</option>)\r\n          }\r\n        </select>\r\n        {\r\n          values && values.map(({ key, defaultValue }) => {\r\n            let val = this.state[key]\r\n            val = val === undefined ? defaultValue : val\r\n            return <span><label>{key}</label><input type=\"number\" style={{ width: '50px' }} value={val} onChange={this.handleChangeForm.bind(this, key)} /></span>\r\n          })\r\n        }\r\n        {/* <input value={remain_times} type='number' min=\"0\" step='1' onChange={this.handleChangeForm.bind(this, 'remain_times')} style={{ width: '50px' }} title=\"剩余次数\"/> */}\r\n        <button disabled={loading} onClick={this.onAdd.bind(this)}>添加</button>\r\n      </div>\r\n      {this.renderList()}\r\n    </div>\r\n  }\r\n\r\n  renderList() {\r\n    const { list } = this.state\r\n    return <table style={{ fontSize: '12px' }}>\r\n      <thead>\r\n        <tr>\r\n          <th>symbol</th>\r\n          <th>side</th>\r\n          <th>amount</th>\r\n          <th>order_method</th>\r\n          <th>signal_name</th>\r\n          <th>signal_operator</th>\r\n          <th>signal_values</th>\r\n          <th>状态</th>\r\n          <th>间隔(h)</th>\r\n          <th>操作</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {\r\n          list.map((a, i) => {\r\n            const isOn = a.on\r\n            let amountColor = ''\r\n            if (isOn) {\r\n              amountColor = a.side === 'Buy' ? 'green' : 'red'\r\n            }\r\n            return <tr key={i}>\r\n              <td>{a.symbol}</td>\r\n              <td className={SIDE_COLOR_CLASS[a.side]}>{a.side}</td>\r\n              <td style={{ cursor: 'pointer', color: amountColor }} onClick={this.handleChangeAmount.bind(this, i)}>{a.amount}</td>\r\n              <td>{a.order_method}</td>\r\n              <td>\r\n                <select value={a.signal_name} onChange={this.handleChangeKeyValue.bind(this, i, 'signal_name')}>\r\n                  {\r\n                    signalKeys.map((s, j) => <option value={s}>[{j + 1}]{s}</option>)\r\n                  }\r\n                </select>\r\n              </td>\r\n              <td className={SIGNAL_OP_COLOR_CLASS[a.signal_operator]}>{a.signal_operator}</td>\r\n              <td>\r\n                {\r\n                  Object.getOwnPropertyNames(a.values || {}).map((key, j) => {\r\n                    const id = `values-span-${i}-${key}`\r\n                    return <span style={{ cursor: 'pointer' }} key={id} onClick={this.handleChangeOperatorValue.bind(this, i, key)}>\r\n                      <label for={id}>{key}</label>&nbsp;\r\n                      <strong id={id}>{a.values[key]}</strong>\r\n                    </span>\r\n                  })\r\n                }\r\n              </td>\r\n              <td>\r\n                <span onClick={this.handleChangeRemainTimes.bind(this, i)}>\r\n                  <label for={`remian-span-${i}`}>remain_times</label>&nbsp;\r\n                  <strong id={`remian-span-${i}`} className={a.remain_times > 0 ? 'flash' : ''}>{a.remain_times}</strong>\r\n                </span>\r\n              </td>\r\n              <td style={{ cursor: 'pointer' }} onClick={this.handleChangeMinInterval.bind(this, i)}>{a.min_interval}</td>\r\n              <td><button onClick={this.handleDeleteItem.bind(this, i)}>x</button></td>\r\n            </tr>\r\n          })\r\n        }\r\n      </tbody>\r\n    </table>\r\n  }\r\n\r\n  handleChangeForm(key, e) {\r\n    this.setState({\r\n      [key]: e.target.value\r\n    }, () => {\r\n      this.updateStateBySignalName()\r\n    })\r\n  }\r\n\r\n  updateStateBySignalName() {\r\n    const { signal_name, signal_operator } = this.state\r\n    const { operators } = SIGNALS[signal_name]\r\n    // 重置signal_operator\r\n    if (operators.indexOf(signal_operator) === -1) {\r\n      this.setState({\r\n        signal_operator: operators[0]\r\n      })\r\n    }\r\n  }\r\n\r\n  onAdd() {\r\n    const { user } = this.props\r\n    const { symbol, side, amount, order_method, signal_name, remain_times, signal_operator, signal_value } = this.state\r\n    const values = SIGNALS[signal_name].values\r\n    const auto_order = {\r\n      symbol,\r\n      side,\r\n      amount,\r\n      order_method,\r\n      signal_name,\r\n      signal_operator,\r\n      signal_value,\r\n      remain_times,\r\n      min_interval: 0,\r\n      values: {}\r\n    }\r\n    if (values) {\r\n      values.forEach(({ key, defaultValue }) => {\r\n        let val = this.state[key]\r\n        if (val === undefined) {\r\n          val = defaultValue\r\n        }\r\n        auto_order.values[key] = val\r\n      })\r\n    }\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    axios.post('api/coin/add_auto_order_signal', { user, auto_order }).then(({ status, data }) => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      if (status === 200) {\r\n        this.fetchList()\r\n      } else {\r\n        this.props.onPushLog(data)\r\n      }\r\n    }).catch(e => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      this.props.onPushLog(e)\r\n    })\r\n  }\r\n\r\n  fetchList() {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    axios.get(`api/coin/auto_order_signal_list?user=${this.props.user}`).then(({ status, data }) => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      if (status === 200) {\r\n        this.setState({\r\n          list: data.data,\r\n        })\r\n      } else {\r\n        this.props.onPushLog(data)\r\n      }\r\n    }).catch(e => {\r\n      this.props.onPushLog(e)\r\n    })\r\n  }\r\n\r\n  handleDeleteItem(index) {\r\n    const { user } = this.props\r\n    if (window.confirm('delete ?')) {\r\n      axios.post('api/coin/delete_auto_order_signal', { user, index }).then(({ status, data }) => {\r\n        if (status === 200) {\r\n          this.fetchList()\r\n        } else {\r\n          this.props.onPushLog(data)\r\n        }\r\n      }).catch(e => this.props.onPushLog(e))\r\n    }\r\n  }\r\n\r\n  handleSetOn(index, on) {\r\n    const { list } = this.state\r\n    const autoOrder = list[index]\r\n    const newOrder = {\r\n      ...autoOrder,\r\n      on\r\n    }\r\n    this.updateAutoOrder(index, newOrder)\r\n  }\r\n\r\n  handleSetRepeat(index, repeat) {\r\n    const { list } = this.state\r\n    const autoOrder = list[index]\r\n    const newOrder = {\r\n      ...autoOrder,\r\n      repeat\r\n    }\r\n    this.updateAutoOrder(index, newOrder)\r\n  }\r\n\r\n  updateAutoOrder(index, auto_order) {\r\n    const { user } = this.props\r\n    axios.post('api/coin/update_auto_order_signal', { user, index, auto_order }).then(({ status, data }) => {\r\n      if (status === 200) {\r\n        this.fetchList()\r\n      } else {\r\n        this.props.onPushLog(data)\r\n      }\r\n    }).catch(e => this.props.onPushLog(e))\r\n  }\r\n\r\n  handleChangeAmount(index) {\r\n    const { list } = this.state\r\n    const autoOrder = list[index]\r\n    const newAmount = window.prompt('amount', autoOrder.amount)\r\n    if (newAmount) {\r\n      const newOrder = {\r\n        amount: +newAmount\r\n      }\r\n      this.updateAutoOrder(index, newOrder)\r\n    }\r\n  }\r\n\r\n  handleChangeRemainTimes(index) {\r\n    const { list } = this.state\r\n    const autoOrder = list[index]\r\n    const newTimes = window.prompt('remain_times', autoOrder.remain_times)\r\n    if (newTimes !== null) {\r\n      const newOrder = {\r\n        remain_times: +newTimes\r\n      }\r\n      this.updateAutoOrder(index, newOrder)\r\n    }\r\n  }\r\n\r\n  handleChangeOperatorValue(index, key) {\r\n    const { list } = this.state\r\n    const autoOrder = list[index]\r\n    const newV = window.prompt(key, autoOrder.values[key])\r\n    if (newV !== null) {\r\n      const newOrder = {\r\n        values: {\r\n          ...autoOrder.values,\r\n          [key]: +newV\r\n        }\r\n      }\r\n      this.updateAutoOrder(index, newOrder)\r\n    }\r\n  }\r\n\r\n  handleChangeMinInterval(index) {\r\n    const { list } = this.state\r\n    const autoOrder = list[index]\r\n    const newInterval = window.prompt('min_interval', autoOrder.min_interval)\r\n    if (newInterval !== null) {\r\n      const newOrder = {\r\n        min_interval: +newInterval\r\n      }\r\n      this.updateAutoOrder(index, newOrder)\r\n    }\r\n  }\r\n\r\n  handleChangeKeyValue(index, key, e) {\r\n    // const { list } = this.state\r\n    // const autoOrder = list[index]\r\n    const newOrder = {\r\n      [key]: e.target.value\r\n    }\r\n    this.updateAutoOrder(index, newOrder)\r\n  }\r\n}\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport AutoOrderStopList from './AutoOrderStopList'\r\n\r\nimport './index.css'\r\n\r\nfunction formatPosition(val, key, position) {\r\n  switch (key) {\r\n    case 'realisedPnl':\r\n    case 'unrealisedPnl':\r\n    case 'realisedGrossPnl':\r\n      return (val / 1E8).toFixed(4)\r\n    case 'unrealisedPnlPcnt':\r\n      return (val * position.leverage * 100).toFixed(3) + '%'\r\n    default:\r\n      return val\r\n  }\r\n}\r\n\r\nconst positionKeyText = {\r\n  'leverage': '倍',\r\n  'currentQty': 'Qty',\r\n  'avgCostPrice': 'Price',\r\n  'realisedGrossPnl': 'rG Pnl',\r\n  'realisedPnl': 'r Pnl',\r\n  'unrealisedPnl': 'ur Pnl',\r\n  'unrealisedPnlPcnt': 'ur Pnl%'\r\n}\r\n\r\nconst AUTO_STOP_OFFSET_MAP = {\r\n  'XBTUSD': 8,\r\n  'ETHUSD': 1,\r\n  'ADAH19': 0.0000001,\r\n  'XRPH19': 0.0000002,\r\n  'ETHH19': 0.0001,\r\n  'EOSH19': 0.000002,\r\n  'LTCH19': 0.0001,\r\n  'TRXH19': 0.00000008,\r\n  'BCHH19': 0.001,\r\n}\r\n\r\nconst supportSymbols = ['XBTUSD', 'ETHUSD', 'ADAH19', 'XRPH19', 'ETHH19', 'EOSH19', 'LTCH19', 'TRXH19', 'BCHH19']\r\n\r\nexport default class Trade extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      logs: [],\r\n      users: [],\r\n      list_pending: false,\r\n      all_quotes: [],\r\n      all_instruments: [],\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchUserList()\r\n    this.fetchOrderbookDepth()\r\n    this.fetchAllInstruments()\r\n  }\r\n\r\n  render() {\r\n    const { logs, users, all_quotes } = this.state\r\n    const xbtInstrument = this.findInstrumentBySymbol('XBTUSD')\r\n    const xbtBidPrice = xbtInstrument ? xbtInstrument.bidPrice : 0\r\n    return <div className=\"trade-container\">\r\n      <div>\r\n        {\r\n          users.map((user, i) => {\r\n            const { options, positions, margin, orders, form, pending } = user\r\n            const { walletBalance, availableMargin } = margin || {}\r\n            const totalRPnl = positions.reduce((pre, cur) => pre + cur.unrealisedPnl, 0) / 1E8\r\n            // 检查止损是否设置正常\r\n            const orderStopValideMsg = this.checkStop(i)\r\n            const positionKeys = ['symbol', 'leverage', 'currentQty', 'avgCostPrice', 'unrealisedPnl', 'unrealisedPnlPcnt', 'realisedGrossPnl', 'realisedPnl']\r\n            const balance = walletBalance / 1E8\r\n            const balaceUsd = xbtBidPrice ? (balance * xbtBidPrice).toFixed(0) : null\r\n            const rpnBalance = balance + totalRPnl\r\n            const rpnBalanceUsd = xbtBidPrice ? (rpnBalance * xbtBidPrice).toFixed(0) : null\r\n\r\n            return <div className=\"user-row\">\r\n              <div>user: {options.user} ({(availableMargin / 1E8).toFixed(3)}/{balance.toFixed(3)})({balaceUsd})&nbsp;close:{rpnBalanceUsd}</div>\r\n              <div className=\"account clearfix\">\r\n                <table style={{ fontSize: '12px' }}>\r\n                  <thead>\r\n                    <tr>\r\n                      {[<th></th>].concat(positionKeys.map(key => <th>{positionKeyText[key] || key}</th>))}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {\r\n                      positions.map(position => {\r\n                        return <tr>\r\n                          {\r\n                            [\r\n                              <td><button style={{ margin: \"5px 2px\" }} onClick={this.handleClosePosition.bind(this, i, position)}>Close</button></td>\r\n                            ].concat(positionKeys.map(key => {\r\n                              const val = position[key]\r\n                              let format = formatPosition(val, key, position)\r\n                              if (['unrealisedPnl'].indexOf(key) > -1 && xbtBidPrice) {\r\n                                format = `${format} (${(format * xbtBidPrice).toFixed(0)})`\r\n                              }\r\n                              let cn = ''\r\n                              if (['currentQty', 'realisedGrossPnl', 'realisedPnl', 'unrealisedPnl', 'unrealisedPnlPcnt'].indexOf(key) > -1) {\r\n                                if (val > 0) {\r\n                                  cn = 'green'\r\n                                } else if (val < 0) {\r\n                                  cn = 'red'\r\n                                }\r\n                              }\r\n                              return <td className={cn} onClick={this.handlePositionCellClick.bind(this, i, position, key)}>{format}</td>\r\n                            }))}\r\n                        </tr>\r\n                      })\r\n                    }\r\n\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <hr />\r\n              <div className=\"title\">Orders</div>\r\n              <div className=\"orders-container\">\r\n                <table>\r\n                  <thead><tr>\r\n                    <th></th>\r\n                    <th>symbol</th>\r\n                    <th>qty</th>\r\n                    <th>price</th>\r\n                    <th>类型</th>\r\n                    <th>状态</th>\r\n                    <th>剩余</th>\r\n                    <th>时间</th>\r\n                  </tr></thead>\r\n                  <tbody>\r\n                    {\r\n                      orders.filter(o => o.ordType !== 'Stop').map((order, j) => {\r\n                        const isBuy = order.side === 'Buy'\r\n                        return <tr>\r\n                          <td><button onClick={this.handleDelOrder.bind(this, i, order)}>Del</button></td>\r\n                          <td>{order.symbol}</td>\r\n                          <td style={{ cursor: 'pointer' }} title=\"点击修改\" className={isBuy ? 'green' : 'red'} onClick={this.handleUpdateOrder.bind(this, i, order, 'orderQty')}>{order.orderQty * (isBuy ? 1 : -1)}</td>\r\n                          <td style={{ cursor: 'pointer' }} title=\"点击修改\" onClick={this.handleUpdateOrder.bind(this, i, order, 'price')}>{order.price}</td>\r\n                          <td>{order.ordType}{order.execInst.indexOf('ReduceOnly') > -1 ? '只减仓' : ''}</td>\r\n                          <td>{order.ordStatus}</td>\r\n                          <td className={isBuy ? 'green' : 'red'}>{order.leavesQty * (isBuy ? 1 : -1)}</td>\r\n                          <td>{new Date(order.timestamp).toLocaleString()}</td>\r\n                        </tr>\r\n                      })\r\n                    }\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <div>\r\n                {\r\n                  all_quotes.map(quote => {\r\n                    const instrument = this.findInstrumentBySymbol(quote.symbol)\r\n                    return <div style={{ whiteSpace: 'nowrap' }}>\r\n                      {quote.symbol}:&nbsp;\r\n                      ({quote.bidSize / 1E3 + 'k'})<span className=\"green\">{quote.bidPrice}</span> :&nbsp;\r\n                      <sapn className=\"red\">{quote.askPrice}</sapn>({quote.askSize / 1E3 + 'k'})\r\n                      {\r\n                        instrument && `[${instrument.fundingRate * 100}% ${new Date(instrument.fundingTimestamp).toLocaleString()}]`\r\n                      }\r\n                    </div>\r\n                  })\r\n                }\r\n              </div>\r\n              <div style={{ marginBottom: '10px' }}>\r\n                <select value={form.order_symbol} onChange={this.handleSelectChangeFormData.bind(this, i, 'order_symbol')}>\r\n                  {supportSymbols.map(s => <option value={s}>{s}</option>)}\r\n                </select>\r\n                <select value={form.order_side} onChange={this.handleSelectChangeFormData.bind(this, i, 'order_side')}>\r\n                  <option value=\"Buy\">Buy</option>\r\n                  <option value=\"Sell\">Sell</option>\r\n                </select>\r\n                <input className={form.order_side === 'Buy' ? 'green' : 'red'} onChange={this.handleInputChangeFormData.bind(this, i, 'order_qty')} style={{ width: '80px' }} type=\"number\" value={form.order_qty} />\r\n              </div>\r\n              <div style={{ marginBottom: '10px' }}>\r\n                <label for=\"auto_price_checkbox\">auto price</label><input checked={form.auto_price} type=\"checkbox\" id=\"auto_price_checkbox\" onChange={this.handleChangeCheckbox.bind(this, i, 'auto_price')} />\r\n                {\r\n                  !form.auto_price && <span><label>P:</label><input value={form.order_price} style={{ width: '100px' }} type=\"number\" onChange={this.handleInputChangeFormData.bind(this, i, 'order_price')} /></span>\r\n                }\r\n                <button onClick={this.handleOrderLimit.bind(this, i)} disabled={pending || (!form.auto_price && !form.order_price)}>Order Limit</button>\r\n                <input type=\"checkbox\" id=\"reduce-only-checkbox\" checked={form.reduce_only} style={{ marginLeft: '10px' }} onChange={this.handleChangeCheckbox.bind(this, i, 'reduce_only')} /><label for=\"reduce-only-checkbox\">reduce only</label>\r\n              </div>\r\n              <div>\r\n                <button disabled={pending} onClick={this.handleOrderMarket.bind(this, i)} title=\"市价\">Order Market</button>\r\n                <button disabled={pending} onClick={this.handleOrderScalping.bind(this, i, false)} title=\"限价单，并自动挂一个止损单\">Order Scalping</button>\r\n                <button disabled={pending} onClick={this.handleOrderScalping.bind(this, i, true)} title=\"市价单，并自动挂一个止损单\">Order Scalping Market</button>\r\n              </div>\r\n              <hr />\r\n              <div className=\"title\">\r\n                Stop Orders\r\n                <input type=\"checkbox\" checked={options.autoUpdateStopOpenMarketOrder} onChange={this.handleChangeZZSD.bind(this, i)} /> 5m自动追涨杀跌\r\n                <input type=\"checkbox\" checked={options.autoUpdateStopOpenMarketOrder1h} onChange={this.handleChangeZZSD1h.bind(this, i)} /> 1h自动追涨杀跌\r\n                {\r\n                  <span className=\"red\">{orderStopValideMsg}</span>\r\n                }\r\n              </div>\r\n              <div>\r\n                <table>\r\n                  <thead><tr>\r\n                    <th></th>\r\n                    <th>symbol</th>\r\n                    <th>数量</th>\r\n                    <th>触发P</th>\r\n                    <th>止损P</th>\r\n                    <th>状态</th>\r\n                    <th>剩余</th>\r\n                    <th>时间</th>\r\n                    <th>execInst</th>\r\n                    <th>ordType</th>\r\n                  </tr></thead>\r\n                  <tbody>\r\n                    {\r\n                      orders.filter(o => o.ordType === 'Stop' || o.ordType === 'MarketIfTouched').map(order => {\r\n                        const isBuy = order.side === 'Buy'\r\n                        return <tr>\r\n                          <td><button onClick={this.handleDelOrder.bind(this, i, order)}>Del</button></td>\r\n                          <td>{order.symbol}</td>\r\n                          <td style={{ cursor: 'pointer' }} title=\"点击修改\" className={order.side == 'Buy' ? 'green' : 'red'} onClick={this.handleUpdateOrder.bind(this, i, order, 'orderQty')}>{order.orderQty * (isBuy ? 1 : -1)}</td>\r\n                          <td style={{ cursor: 'pointer' }} title=\"点击修改\" onClick={this.handleUpdateOrder.bind(this, i, order, 'stopPx')}>{order.stopPx}</td>\r\n                          <td>{order.price || '市价'}</td>\r\n                          <td>{order.ordStatus}</td>\r\n                          <td className={isBuy ? 'green' : 'red'}>{order.leavesQty * (isBuy ? 1 : -1)}</td>\r\n                          <td>{new Date(order.timestamp).toLocaleString()}</td>\r\n                          <td title=\"如果包含了Close, 那么只是平仓用，否则可以开仓\">{order.execInst}</td>\r\n                          <td>{order.ordType}</td>\r\n                        </tr>\r\n                      })\r\n                    }\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <div>\r\n                <div style={{ marginBottom: '10px' }}>\r\n                  <select value={form.stop_symbol} onChange={this.handleSelectChangeFormData.bind(this, i, 'stop_symbol')}>\r\n                    {supportSymbols.map(s => <option value={s}>{s}</option>)}\r\n                  </select>\r\n                  <select value={form.stop_side} onChange={this.handleSelectChangeFormData.bind(this, i, 'stop_side')}>\r\n                    <option value=\"Buy\">Buy</option>\r\n                    <option value=\"Sell\">Sell</option>\r\n                  </select>\r\n                  <input className={form.stop_side === 'Buy' ? 'green' : 'red'} onChange={this.handleInputChangeFormData.bind(this, i, 'stop_qty')} style={{ width: '80px' }} type=\"number\" value={form.stop_qty} />\r\n                </div>\r\n                <div style={{ marginBottom: '10px' }}>\r\n                  <button onClick={this.handleOrderStopByPreK.bind(this, i, '5m')}>前5m极点</button>\r\n                  <button onClick={this.handleOrderStopByPreK.bind(this, i, '1h')}>前1h极点</button>\r\n                </div>\r\n                <div style={{ marginBottom: '10px' }}>\r\n                  <label>stopPx:</label>\r\n                  <input value={form.stop_price} style={{ width: '100px' }} type=\"number\" onChange={this.handleInputChangeFormData.bind(this, i, 'stop_price')} />\r\n                  <button onClick={this.handleOrderStop.bind(this, i, 0)} disabled={pending || !form.stop_price}>Order Stop Market</button>\r\n                  <label for=\"checkbox-stop-close\">Close</label>\r\n                  <input checked={form.stop_close} type=\"checkbox\" id=\"checkbox-stop-close\" onChange={this.handleChangeCheckbox.bind(this, i, 'stop_close')} />\r\n                  <button onClick={this.handleOrderStop.bind(this, i, 1)} disabled={pending || !form.stop_price}>Take Profit Market</button>\r\n                </div>\r\n              </div>\r\n              <AutoOrderStopList user={options.user} onPushLog={this.pushLog.bind(this)} />\r\n              <hr />\r\n              <div className=\"actions\">\r\n                <div>\r\n\r\n                </div>\r\n                <div>\r\n                  <button onClick={this.handleDeleteAll.bind(this, i)} disabled={pending}>Delete All Orders</button>\r\n                </div>\r\n                <div></div>\r\n              </div>\r\n              <div>\r\n                <h5>Config</h5>\r\n                <table>\r\n                  <thead>\r\n                    <tr><th>序号</th><td>自动平仓</td><td>信号</td></tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {\r\n                      [\r\n                        // 'autoCloseMacdDivergence5m',\r\n                        // 'autoCloseMacdDivergence1h',                    \r\n                        'autoCloseRsiOverTrade5m',\r\n                        'autoCloseRsiDivergence5m',\r\n                        'autoCloseRsiOverTrade_3070_1h',\r\n                        'autoCloseRsiOverTrade_2575_1h',\r\n                        'autoCloseRsiOverTrade1h',\r\n                        'autoCloseRsiDivergence_3070_1h',\r\n                        'autoCloseRsiDivergence_2575_1h',\r\n                        'autoCloseRsiDivergence1h',\r\n                        // 'autoCloseStochOverTrade5m',\r\n                        // 'autoCloseStochOverTrade1h',\r\n                        // 'autoCloseStochDivergence5m',\r\n                        // 'autoCloseStochDivergence1h',\r\n                      ].map((key, j) => {\r\n                        return <tr>\r\n                          <td>\r\n                            {j + 1}\r\n                          </td>\r\n                          <td>\r\n                            <input id={`config-${j}`} type=\"checkbox\" onChange={this.handleCheckboxOption.bind(this, i, key)} checked={options[key]} />\r\n                          </td>\r\n                          <td>\r\n                            <label for={`config-${j}`}>{key}</label>\r\n                          </td>\r\n                        </tr>\r\n                      })\r\n                    }\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {\r\n                pending && <div className=\"pending-container\">fetching...</div>\r\n              }\r\n            </div>\r\n          })\r\n        }\r\n      </div>\r\n      <div className=\"logs\">\r\n        <h5>日志</h5>\r\n        <ul>\r\n          {\r\n            logs.map(log => <li>{JSON.stringify(log)}</li>)\r\n          }\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n  fetchOrderbookDepth() {\r\n    axios.get(`/api/coin/all_quotes?t=${+new Date()}`).then(({ status, data }) => {\r\n      if (status === 200 && data.result) {\r\n        const all_quotes = data.data || []\r\n        // const obBuy = order_book[0]\r\n        this.setState({\r\n          all_quotes,\r\n        })\r\n      } else {\r\n        this.pushLog(data.info)\r\n      }\r\n    })\r\n  }\r\n\r\n  fetchAllInstruments() {\r\n    axios.get(`/api/coin/all_instruments?t=${+new Date()}`).then(({ status, data }) => {\r\n      if (status === 200 && data.result) {\r\n        const all_instruments = data.data || []\r\n        this.setState({\r\n          all_instruments\r\n        })\r\n      } else {\r\n        this.pushLog(data.info)\r\n      }\r\n    })\r\n  }\r\n\r\n  findInstrumentBySymbol(symbol) {\r\n    const { all_instruments } = this.state\r\n    for (let i = 0; i < all_instruments.length; i++) {\r\n      const item = all_instruments[i]\r\n      if (item.symbol === symbol) {\r\n        return item\r\n      }\r\n    }\r\n  }\r\n\r\n  fetchUserList() {\r\n    this.setState({\r\n      list_pending: true\r\n    })\r\n    axios.get('/api/coin').then(({ data, status }) => {\r\n      if (status === 200 && data.result) {\r\n        this.setState({\r\n          users: data.items.map(item => {\r\n            item.form = {\r\n              order_side: 'Buy', order_qty: 100, pending: false, order_price: null,\r\n              stop_side: 'Sell', stop_qty: 1000, stop_price: null,\r\n              reduce_only: false,\r\n              order_symbol: 'XBTUSD',\r\n              stop_symbol: 'XBTUSD',\r\n              auto_price: false,\r\n              stop_close: true,\r\n            }\r\n            return item\r\n          }),\r\n          list_pending: false,\r\n        })\r\n      } else {\r\n        alert('服务器错误')\r\n        this.state.logs.push(data)\r\n        this.setState({\r\n          list_pending: false\r\n        })\r\n      }\r\n    }).catch(e => {\r\n      alert('程序错误')\r\n      this.state.logs.push(e)\r\n      this.setState({\r\n        list_pending: false\r\n      })\r\n    })\r\n  }\r\n\r\n  handleSelectChangeFormData(index, key, e) {\r\n    this.state.users[index].form[key] = e.target.value\r\n    this.setState({})\r\n  }\r\n\r\n  handleInputChangeFormData(index, key, e) {\r\n    this.state.users[index].form[key] = e.target.value\r\n    this.setState({})\r\n  }\r\n\r\n  handleChangeCheckbox(index, key, e) {\r\n    this.state.users[index].form[key] = e.target.checked\r\n    this.setState({})\r\n  }\r\n\r\n  handleOrderLimit(index) {\r\n    var userData = this.state.users[index]\r\n    const user = userData.options.user\r\n    const { order_side, order_qty, order_price, reduce_only, order_symbol, auto_price } = userData.form\r\n    var info = `${user}\\n ${order_symbol} ${order_side} ${order_qty} at ${auto_price ? '自动价格' : order_price} ${reduce_only ? '只减仓' : ''}`\r\n    if (window.confirm(info)) {\r\n      userData.pending = true\r\n      this.setState({})\r\n      let path = '/api/coin/order_limit'\r\n      if (reduce_only) {\r\n        path = '/api/coin/order_reduce_only_limit'\r\n      }\r\n      axios.post(path, {\r\n        user,\r\n        symbol: order_symbol,\r\n        qty: order_qty,\r\n        side: order_side,\r\n        price: order_price,\r\n        auto_price: auto_price,\r\n      }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          let isCaceled = false\r\n          if (data.data && data.data.ordStatus === \"Canceled\") {\r\n            this.pushLog(data.data.text)\r\n            isCaceled = true\r\n          }\r\n          alert(`success! ${isCaceled ? 'but Canceled 详细请看日志' : ''}`)\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        userData.pending = false\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleOrderMarket(index) {\r\n    var userData = this.state.users[index]\r\n    const user = userData.options.user\r\n    const { order_side, order_qty, order_symbol } = userData.form\r\n    var info = `${user}\\n ${order_symbol} ${order_side} ${order_qty} Market?`\r\n    if (window.confirm(info)) {\r\n      userData.pending = true\r\n      this.setState({})\r\n      axios.post('/api/coin/order_market', {\r\n        user: user,\r\n        symbol: order_symbol,\r\n        qty: order_qty,\r\n        side: order_side,\r\n      }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          alert('success!')\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        userData.pending = false\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n  // order limit auto stop and order a stop market at the same time\r\n  // market 市价\r\n  handleOrderScalping(index, market) {\r\n    var userData = this.state.users[index]\r\n    const user = userData.options.user\r\n    const { order_side, order_qty, order_symbol } = userData.form\r\n    var info = `${user}\\n ${order_symbol} ${order_side} ${order_qty} Scalping ${market ? \"Market\" : \"Limit\"}?`\r\n\r\n    const stopOffset = AUTO_STOP_OFFSET_MAP[order_symbol]\r\n\r\n    if (window.confirm(info)) {\r\n      userData.pending = true\r\n      Promise.all([\r\n        axios.post(market ? '/api/coin/order_market' : '/api/coin/order_limit', {\r\n          user,\r\n          symbol: order_symbol,\r\n          qty: order_qty,\r\n          side: order_side,\r\n          auto_price: true\r\n        }),\r\n        axios.post('api/coin/order_stop', {\r\n          user,\r\n          symbol: order_symbol,\r\n          qty: order_qty,\r\n          side: order_side === 'Buy' ? 'Sell' : 'Buy',\r\n          offset: stopOffset\r\n        })\r\n      ]).then(() => {\r\n        userData.pending = false\r\n        alert('success!')\r\n        this.fetchUserList()\r\n      }).catch(e => {\r\n        userData.pending = false\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n  // 市价止损\r\n  handleOrderStop(index, type) {\r\n    var userData = this.state.users[index]\r\n    const user = userData.options.user\r\n    const { stop_side, stop_qty, stop_price, stop_symbol, stop_close } = userData.form\r\n    var info = `${user} ${type === 1 ? 'order MarketIfTouched' : 'order stop market'}?\\n ${stop_symbol} ${stop_side} ${stop_qty} at ${stop_price}?`\r\n    if (window.confirm(info)) {\r\n      userData.pending = true\r\n      this.setState({})\r\n      const path = type === 1 ? 'api/coin/order_market_if_touched' : 'api/coin/order_stop'\r\n      axios.post(path, { user, symbol: stop_symbol, qty: stop_qty, side: stop_side, stopPx: stop_price, stop_close }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          alert('order stop success')\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        userData.pending = false\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleOrderStopByPreK(index, period) {\r\n    const path = 'api/coin/order_stop_open_by_lastcandle'\r\n    var userData = this.state.users[index]\r\n    const { user } = userData.options\r\n    const { stop_symbol, stop_side, stop_qty } = userData.form\r\n    userData.pending = true\r\n    this.setState({})\r\n    const info = `${user} order stop open: ${stop_side} ${stop_symbol} ${stop_qty} 前一K线（${period}）?`\r\n    if (window.confirm(info)) {\r\n      axios.post(path, { user, period, symbol: stop_symbol, qty: stop_qty, side: stop_side }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          alert('order stop success')\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        userData.pending = false\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleDelOrder(index, order) {\r\n    var userData = this.state.users[index]\r\n    const { user } = userData.options\r\n    const info = `user: ${user}, Delete order:\\n side: ${order.side} qty: ${order.orderQty} type: ${order.ordType}`\r\n    if (window.confirm(info)) {\r\n      userData.pending = true\r\n      this.setState({})\r\n      axios.post('api/coin/delete_order', { user, order_id: order.orderID }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          alert('success!')\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        userData.pending = false\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleDeleteAll(index) {\r\n    var userData = this.state.users[index]\r\n    const { user } = userData.options\r\n    const info = `user: ${user}, Delete All Orders ?`\r\n    if (window.confirm(info)) {\r\n      userData.pending = true\r\n      this.setState({})\r\n      axios.post('api/coin/delete_order_all', { user }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          alert('delete all success')\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        userData.pending = true\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleClosePosition(index, position) {\r\n    var userData = this.state.users[index]\r\n    const { user } = userData.options\r\n    const symbol = position.symbol\r\n    const info = `user: ${user}, close position ${symbol} market?`\r\n    if (window.confirm(info)) {\r\n      userData.pending = true\r\n      this.setState({})\r\n      axios.post('api/coin/close_position', { user, symbol, }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          alert('close postion success')\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n\r\n  handlePositionCellClick(index, position, key) {\r\n    var userData = this.state.users[index]\r\n    const val = position[key]\r\n    const { user } = userData.options\r\n    const symbol = position.symbol\r\n\r\n    if (key === 'leverage') {\r\n      const newLeverage = window.prompt('leverage', val)\r\n      userData.pending = true\r\n      this.setState({})\r\n      axios.post('api/coin/change_leverage', { user, symbol, leverage: newLeverage }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          alert('change leverage success!')\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleUpdateOrder(index, order, key) {\r\n    var userData = this.state.users[index]\r\n    const { user } = userData.options\r\n    const oldValue = order[key]\r\n    const newVal = window.prompt(`${user} update order: ${key}`, oldValue)\r\n    if (newVal) {\r\n      const newOrder = {\r\n        orderID: order.orderID,\r\n        [key]: newVal\r\n      }\r\n      userData.pending = true\r\n      this.setState({})\r\n      axios.post('api/coin/update_order', { user, params: newOrder }).then(({ status, data }) => {\r\n        userData.pending = false\r\n        if (status === 200 && data.result) {\r\n          alert('修改成功')\r\n          this.fetchUserList()\r\n        } else {\r\n          this.pushLog(data.info)\r\n        }\r\n      }).catch(e => {\r\n        userData.pending = false\r\n        this.pushLog(e)\r\n      })\r\n    }\r\n  }\r\n\r\n  pushLog(info) {\r\n    this.state.logs.push(info)\r\n    this.setState({})\r\n  }\r\n\r\n  checkStop(index) {\r\n    var userData = this.state.users[index]\r\n    const { positions } = userData\r\n    let msg = ''\r\n    positions.forEach(p => {\r\n      const isbuyPosition = p.currentQty > 0\r\n      let totalQty = 0\r\n      userData.orders.filter(o => o.symbol === p.symbol).forEach(o => {\r\n        const side = isbuyPosition ? 'Sell' : 'Buy'\r\n        if (o.ordType === 'Stop' && o.side === side) {\r\n          totalQty += o.orderQty\r\n        }\r\n      })\r\n      if (totalQty < Math.abs(p.currentQty)) {\r\n        msg = msg + `${p.symbol}止损设置有误！`\r\n      }\r\n    })\r\n\r\n    return msg\r\n  }\r\n\r\n  handleCheckboxOption(index, key, e) {\r\n    this.fetchChangeUserOption(index, key, e.target.checked)\r\n  }\r\n\r\n  handleChangeZZSD(index, e) {\r\n    const key = 'autoUpdateStopOpenMarketOrder'\r\n    this.fetchChangeUserOption(index, key, e.target.checked)\r\n  }\r\n\r\n  handleChangeZZSD1h(index, e) {\r\n    const key = 'autoUpdateStopOpenMarketOrder1h'\r\n    this.fetchChangeUserOption(index, key, e.target.checked)\r\n  }\r\n\r\n  fetchChangeUserOption(index, key, value) {\r\n    var userData = this.state.users[index]\r\n    const { user } = userData.options\r\n    userData.pending = true\r\n    this.setState({})\r\n    const options = {\r\n      [key]: value\r\n    }\r\n    axios.post('api/coin/change_options', { user, options }).then(({ status, data }) => {\r\n      userData.pending = false\r\n      if (status === 200 && data.result) {\r\n        alert('修改成功')\r\n        this.fetchUserList()\r\n      } else {\r\n        this.pushLog(data.info)\r\n      }\r\n    }).catch(e => {\r\n      userData.pending = false\r\n      this.pushLog(e)\r\n    })\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport Trade from './views/Trade'\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Trade />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}